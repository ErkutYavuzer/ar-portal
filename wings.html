<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>üëº Angel Wings AR</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html,
        body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000;
        }

        #loading {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
            font-family: -apple-system, Arial, sans-serif;
            z-index: 9999;
        }

        #loading h1 {
            font-size: 48px;
            margin-bottom: 20px;
        }

        #loading .status {
            font-size: 16px;
            opacity: 0.8;
            margin: 5px 0;
        }

        .spin {
            animation: spin 2s linear infinite;
            display: inline-block;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        #progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            margin-top: 20px;
        }

        #progress-bar {
            width: 0%;
            height: 100%;
            background: #667eea;
            border-radius: 2px;
            transition: width 0.3s;
        }
    </style>
</head>

<body>
    <div id="loading">
        <h1>üëº</h1>
        <div class="status"><span class="spin">‚è≥</span> <span id="step">Hazƒ±rlanƒ±yor...</span></div>
        <div id="progress">
            <div id="progress-bar"></div>
        </div>
        <div class="status" style="margin-top: 30px; font-size: 12px; opacity: 0.5;">ƒ∞lk y√ºklemede 15-20 sn s√ºrebilir
        </div>
    </div>

    <script>
        const step = document.getElementById('step');
        const progressBar = document.getElementById('progress-bar');
        const loading = document.getElementById('loading');

        function setProgress(percent, text) {
            progressBar.style.width = percent + '%';
            step.textContent = text;
        }

        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const s = document.createElement('script');
                s.src = src;
                s.onload = resolve;
                s.onerror = () => reject(new Error('Y√ºklenemedi: ' + src.split('/').pop()));
                document.head.appendChild(s);
            });
        }

        async function init() {
            try {
                setProgress(10, 'MindAR y√ºkleniyor...');
                await loadScript('https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-face.prod.js');

                setProgress(40, 'A-Frame y√ºkleniyor...');
                await loadScript('https://aframe.io/releases/1.4.2/aframe.min.js');

                setProgress(70, 'AR mod√ºl√º y√ºkleniyor...');
                await loadScript('https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-face-aframe.prod.js');

                setProgress(90, 'Kamera ba≈ülatƒ±lƒ±yor...');

                // Create A-Frame scene
                document.body.insertAdjacentHTML('beforeend', `
                    <a-scene mindar-face embedded vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
                        <a-camera active="false" position="0 0 0"></a-camera>
                        <a-entity mindar-face-target="anchorIndex: 168">
                            <a-entity position="-0.35 0 0.05" rotation="0 -15 -10" scale="0.22 0.22 0.08">
                                <a-cone position="0 0.2 0" rotation="0 0 -30" height="0.5" radius-bottom="0.13" radius-top="0" color="white" material="opacity: 0.95; side: double"></a-cone>
                                <a-cone position="-0.1 0.15 0" rotation="0 0 -50" height="0.4" radius-bottom="0.1" radius-top="0" color="#f5f5f5" material="opacity: 0.9; side: double"></a-cone>
                                <a-cone position="-0.18 0.1 0" rotation="0 0 -65" height="0.3" radius-bottom="0.07" radius-top="0" color="white" material="opacity: 0.85; side: double"></a-cone>
                            </a-entity>
                            <a-entity position="0.35 0 0.05" rotation="0 15 10" scale="0.22 0.22 0.08">
                                <a-cone position="0 0.2 0" rotation="0 0 30" height="0.5" radius-bottom="0.13" radius-top="0" color="white" material="opacity: 0.95; side: double"></a-cone>
                                <a-cone position="0.1 0.15 0" rotation="0 0 50" height="0.4" radius-bottom="0.1" radius-top="0" color="#f5f5f5" material="opacity: 0.9; side: double"></a-cone>
                                <a-cone position="0.18 0.1 0" rotation="0 0 65" height="0.3" radius-bottom="0.07" radius-top="0" color="white" material="opacity: 0.85; side: double"></a-cone>
                            </a-entity>
                            <a-torus position="0 0.3 0" rotation="75 0 0" radius="0.1" radius-tubular="0.012" color="#ffd700" material="emissive: #ffd700; emissiveIntensity: 0.4"></a-torus>
                        </a-entity>
                    </a-scene>
                `);

                const scene = document.querySelector('a-scene');
                scene.addEventListener('arReady', () => {
                    setProgress(100, 'Hazƒ±r! Y√ºz√ºn√º g√∂ster üëº');
                    setTimeout(() => loading.style.display = 'none', 500);
                });

                // Fallback hide
                setTimeout(() => loading.style.display = 'none', 15000);

            } catch (err) {
                setProgress(0, '‚ùå Hata: ' + err.message);
                console.error(err);
            }
        }

        init();
    </script>
</body>

</html>